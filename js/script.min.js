var link=document.querySelector(".btn-write-us"),modalContent=document.querySelector(".modal-content"),modalOverlay=document.querySelector(".modal-overlay"),close=modalContent.querySelector(".modal-content-close"),form=modalContent.querySelector(".message-form"),loginField=modalContent.querySelector("[name=name]"),emailField=modalContent.querySelector("[name=email]"),storage=localStorage.getItem("loginField"),modalMap=document.querySelector(".modal-map"),mapLink=document.querySelector(".map a"),mapClose=modalMap.querySelector(".modal-content-close");link.addEventListener("click",function(e){e.preventDefault(),modalContent.classList.add("modal-content-show"),modalOverlay.classList.add("modal-overlay-show"),storage?(loginField.value=storage,emailField.focus()):loginField.focus()}),close.addEventListener("click",function(e){e.preventDefault(),modalContent.classList.remove("modal-content-show"),modalContent.classList.remove("modal-error"),modalOverlay.classList.remove("modal-overlay-show")}),modalOverlay.addEventListener("click",function(){modalContent.classList.remove("modal-content-show"),modalContent.classList.remove("modal-error"),modalOverlay.classList.remove("modal-overlay-show"),modalMap.classList.remove("modal-map-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(modalContent.classList.contains("modal-content-show")&&(modalContent.classList.remove("modal-content-show"),modalContent.classList.remove("modal-error")),modalOverlay.classList.contains("modal-overlay-show")&&modalOverlay.classList.remove("modal-overlay-show"))}),form.addEventListener("submit",function(e){loginField.value&&emailField.value?localStorage.setItem("loginField",loginField.value):(e.preventDefault(),modalContent.classList.remove("modal-error"),modalContent.offsetWidth=modalContent.offsetWidth,modalContent.classList.add("modal-error"))}),mapLink.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.add("modal-map-show"),modalOverlay.classList.add("modal-overlay-show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.remove("modal-map-show"),modalOverlay.classList.remove("modal-overlay-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&modalMap.classList.contains("modal-map-show")&&modalMap.classList.remove("modal-map-show")});